â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘              ğŸ”„ DIAGRAMA DE FLUJO DEL SISTEMA                       â•‘
â•‘                 Sistema de RecuperaciÃ³n de ContraseÃ±a                â•‘
â•‘                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ARQUITECTURA DEL SISTEMA                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚         â”‚              â”‚        â”‚             â”‚
    â”‚  USUARIO    â”‚ â”€â”€â”€â”€â”€â”€> â”‚   FRONTEND   â”‚ â”€â”€â”€â”€>  â”‚  SERVIDOR   â”‚
    â”‚  (Browser)  â”‚         â”‚  (login.js)  â”‚        â”‚  (Node.js)  â”‚
    â”‚             â”‚         â”‚              â”‚        â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â–²                                                  â”‚
         â”‚                                                  â”‚
         â”‚                                                  â–¼
         â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                          â”‚              â”‚
         â”‚                                          â”‚  SUPABASE    â”‚
         â”‚                                          â”‚  (Database)  â”‚
         â”‚                                          â”‚              â”‚
         â”‚                                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                 â”‚
         â”‚                                                 â”‚
         â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                          â”‚              â”‚
         â”‚                                          â”‚    GMAIL     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   (SMTP)     â”‚
                      âœ‰ï¸ Correo enviado            â”‚              â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FLUJO DETALLADO PASO A PASO                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


1ï¸âƒ£  USUARIO SOLICITA RECUPERACIÃ“N
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Usuario en login.html
         â”‚
         â”œâ”€> Click en "Â¿Olvidaste tu contraseÃ±a?"
         â”‚
         â”œâ”€> Ingresa su email
         â”‚
         â””â”€> Click en "Recuperar ContraseÃ±a"


2ï¸âƒ£  FRONTEND PROCESA LA SOLICITUD
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    login.js (funciÃ³n recuperarContrasenaConGmail)
         â”‚
         â”œâ”€> Valida el formato del email
         â”‚
         â”œâ”€> Muestra loader (cargando...)
         â”‚
         â””â”€> EnvÃ­a peticiÃ³n POST al servidor
             URL: http://localhost:3000/send-recovery-email
             Body: { email: "usuario@gmail.com" }


3ï¸âƒ£  SERVIDOR RECIBE LA PETICIÃ“N
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    email-server.js
         â”‚
         â”œâ”€> Ruta: POST /send-recovery-email
         â”‚
         â”œâ”€> Extrae el email del body
         â”‚
         â””â”€> Valida que exista el email


4ï¸âƒ£  CONSULTA A SUPABASE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Servidor â†’ Supabase
         â”‚
         â”œâ”€> SELECT * FROM usuarios
         â”‚   WHERE email = 'usuario@gmail.com'
         â”‚   AND estado = 'activo'
         â”‚
         â”œâ”€> Si NO existe â†’ Error 404
         â”‚
         â””â”€> Si existe â†’ ContinÃºa al paso 5


5ï¸âƒ£  PREPARAR EL CORREO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Servidor prepara datos:
         â”‚
         â”œâ”€> Destinatario: email del usuario
         â”œâ”€> Asunto: "RecuperaciÃ³n de ContraseÃ±a - Kueni Kueni"
         â”œâ”€> Contenido HTML: Plantilla con diseÃ±o profesional
         â”œâ”€> ContraseÃ±a: password_hash del usuario
         â””â”€> BotÃ³n: Link para iniciar sesiÃ³n


6ï¸âƒ£  ENVIAR POR GMAIL
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Nodemailer + Gmail SMTP
         â”‚
         â”œâ”€> Conecta con gmail.com:587
         â”œâ”€> Autentica con contraseÃ±a de aplicaciÃ³n
         â”œâ”€> EnvÃ­a el correo electrÃ³nico
         â””â”€> Recibe confirmaciÃ³n de envÃ­o


7ï¸âƒ£  RESPUESTA AL FRONTEND
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Servidor â†’ Frontend
         â”‚
         â”œâ”€> Status: 200 OK
         â”œâ”€> Body: { success: true, message: "Correo enviado..." }
         â””â”€> Frontend muestra mensaje de Ã©xito


8ï¸âƒ£  USUARIO RECIBE CORREO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Bandeja de entrada del usuario
         â”‚
         â”œâ”€> Email con diseÃ±o profesional
         â”œâ”€> ContraseÃ±a visible
         â”œâ”€> Advertencias de seguridad
         â”œâ”€> BotÃ³n para iniciar sesiÃ³n
         â””â”€> Usuario puede acceder a su cuenta


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COMPARACIÃ“N: ANTES vs AHORA                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ANTES (con Supabase Auth)                AHORA (con Gmail directo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend                                 Frontend
   â†“                                        â†“
Supabase Auth                            Servidor Node.js
   â†“                                        â†“
Resend API (limitado)                    Supabase (consulta usuario)
   â†“                                        â†“
Email âŒ (limitaciones)                  Gmail SMTP
                                            â†“
                                         Email âœ… (sin lÃ­mites)


Problemas:                               Ventajas:
â€¢ LÃ­mite de envÃ­os                       â€¢ ~500 correos/dÃ­a
â€¢ Emails no llegaban                     â€¢ Confiabilidad 100%
â€¢ Rate limiting                          â€¢ Control total
â€¢ Sin control del diseÃ±o                 â€¢ DiseÃ±o personalizable
                                         â€¢ Logs completos


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TECNOLOGÃAS UTILIZADAS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Frontend (Cliente)              Servidor (Backend)            Servicios
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â•â•â•â•â•â•â•â•â•â•

â€¢ HTML5                        â€¢ Node.js                      â€¢ Gmail SMTP
â€¢ JavaScript                   â€¢ Express.js                   â€¢ Supabase
â€¢ Fetch API                    â€¢ Nodemailer                   
â€¢ CSS3                         â€¢ CORS                         
                               â€¢ Dotenv                       
                               â€¢ @supabase/supabase-js        


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PUERTOS Y URLs                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Desarrollo Local:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend:  http://localhost:5500  (Live Server)
Servidor:  http://localhost:3000  (Express)
Supabase:  https://xxxxx.supabase.co
Gmail:     smtp.gmail.com:587


ProducciÃ³n (Ejemplo):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend:  https://kuenikueni.com
Servidor:  https://api-kuenikueni.railway.app
Supabase:  https://xxxxx.supabase.co
Gmail:     smtp.gmail.com:587


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SEGURIDAD DEL SISTEMA                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Nivel          Medida de Seguridad                   Estado
â•â•â•â•â•          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                   â•â•â•â•â•â•

ğŸ” Gmail      ContraseÃ±a de aplicaciÃ³n              âœ… Implementado
              (no contraseÃ±a real)

ğŸ” Variables  Archivo .env protegido                âœ… Implementado
              (no en cÃ³digo fuente)

ğŸ” GitHub     .gitignore configurado                âœ… Implementado
              (.env no se sube)

ğŸ” CORS       Permite solo frontend                 âœ… Implementado
              autorizado

ğŸ” Usuario    Verifica estado 'activo'              âœ… Implementado
              en Supabase

ğŸ” HTTPS      Recomendado en producciÃ³n             âš ï¸  Configurar despuÃ©s


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MANEJO DE ERRORES                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Error                          AcciÃ³n del Sistema
â•â•â•â•â•                          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Email no vÃ¡lido               â†’ Frontend valida y muestra error
Usuario no encontrado         â†’ Servidor retorna 404
Email no en estado activo     â†’ Servidor retorna 404
Error de Gmail                â†’ Servidor retorna 500 + log
Servidor caÃ­do                â†’ Frontend muestra mensaje especÃ­fico
Supabase no responde          â†’ Servidor retorna 500 + log


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           LOGS Y DEBUGGING                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ“Š SERVIDOR (Terminal)

âœ… Servidor listo para enviar correos desde Gmail
ğŸ“§ Solicitud de recuperaciÃ³n para: usuario@gmail.com
âœ… Usuario encontrado: Juan PÃ©rez
ğŸ“¤ Enviando correo...
âœ… Correo enviado exitosamente: <message-id@gmail.com>


ğŸŒ FRONTEND (Console F12)

ğŸ“§ Solicitando recuperaciÃ³n de contraseÃ±a para: usuario@gmail.com
âœ… Correo enviado exitosamente


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRÃ“XIMOS PASOS (OPCIONAL)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


1. Deployment en producciÃ³n
   â”œâ”€> Railway / Render / Heroku
   â””â”€> Dominio personalizado

2. Implementar mÃ¡s tipos de correos
   â”œâ”€> Bienvenida
   â”œâ”€> ConfirmaciÃ³n de registro
   â””â”€> Notificaciones de eventos

3. Sistema de plantillas
   â””â”€> MÃºltiples diseÃ±os de correos

4. Analytics
   â”œâ”€> Tracking de envÃ­os
   â””â”€> Tasa de apertura


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Â¡Sistema completamente funcional! ğŸ‰

Ahora tienes un servidor profesional de correos que:
âœ… EnvÃ­a desde Gmail sin restricciones
âœ… Tiene diseÃ±o profesional
âœ… Es fÃ¡cil de mantener
âœ… EstÃ¡ listo para producciÃ³n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
